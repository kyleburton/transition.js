<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Transition.js : Detangled in-Browser Webapp Testing" />

    <link rel="stylesheet" type="text/css" media="screen" href="/transition.js/site/stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/transition.js/site/css/transition.js.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/transition.js/site/css/pygments.css">

    <title>API Documentation</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/kyleburton/transition.js/">View on GitHub</a>

          <h1 id="project_title"><a href="/transition.js/2.0">Transition.js 2.0</a></h1>
          <h2 id="project_tagline">Detangled in-Browser Webapp Testing</h2>

          

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">

      
        <section id="nav-documentation" class="inner">
          <a href="/transition.js/site/2.0/documentation">Documentation</a>
        </section>
      

      <section id="main_content" class="inner">
      <ul>
	<li><a href="#dom-helpers">Dom Helpers</a></li>
	<li><a href="#logging-api">Logging <span class="caps">API</span></a></li>
	<li><a href="#declaring-tests">Test Declaration</a></li>
</ul>
<h1>Transition&#8217;s Apis</h1>
<p><a name="dom-helpers"></a></p>
<h2><span class="caps">DOM</span> Helpers</h2>
<p>The <span class="caps">DOM</span> helpers make working with the main frame (where the application runs) simpler.  They will use jQuery within the web application if it is present (by detecting the presence of <code>$</code>), or wrap the main frame&#8217;s document in a jQuery object.</p>
<p>When a function is suffixed with an underscore, it creates a closure over the arguments and returns a function that performs the action.  This is useful for when callbacks are required in your tests, avoiding having to write out an anonymous function.</p>
<h3><code>Transition.navigateTo(url)</code>, <code>Transition.navigateTo_(url)</code></h3>
<p>These set the main frame&#8217;s location.</p>
<h3><code>Transition.find(selctor)</code></h3>
<p>This executes jQuery&#8217;s find, returning the result set.</p>
<h3><code>Transition.elementExist(selctor)s</code>, <code>Transition.elementExists(selctor)_</code></h3>
<p>These boolean predicates test if an element exists in the page.</p>
<h3><code>Transition.elementNotExist(selctor)s</code>, <code>Transition.elementNotExists(selctor)_</code></h3>
<p>These boolean predicates test if an element does not exist in the page.</p>
<h3><code>Transition.noop()</code></h3>
<p>This is a dummy function, it can be used for states where you do not want or need an on-enter trigger.</p>
<h3><code>Transition.constantly_(value)</code></h3>
<p>Returns a function that when called always returns the value passed to <code>constantly_</code>.</p>
<div class="highlight"><pre><code class="javascript">  <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">Transition</span><span class="p">.</span><span class="nx">constantly_</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
  <span class="nx">fn</span><span class="p">();</span> <span class="c1">// =&gt; 3</span>
  <span class="nx">fn</span><span class="p">();</span> <span class="c1">// =&gt; 3</span>
  <span class="nx">fn</span><span class="p">();</span> <span class="c1">// =&gt; 3</span>
</code></pre>
</div>
<h3><code>Transition.click(selector)</code>, <code>Transition.click_(selector)</code></h3>
<p>These take a selector, find the matching dom elements and call <code>click()</code> on them.</p>
<h3><code>Transition.isChecked(selector)</code>, <code>Transition.isChecked_(selector)</code>, <code>Transition.isNotChecked(selector)</code>, <code>Transition.isNotChecked_(selector)</code></h3>
<p>These take a selector and test if the node has or does not have the attribute <code>checked</code>.</p>
<h3><code>Transition.clickAnchor(selector)</code>, <code>Transition.clickAnchor_(selector)</code></h3>
<p>These functions take a selector and simulate clicking an anchor tag.  They set the main frame&#8217;s location to the href of the anchor tag.  If href starts with a has, then only the location.hash is set.</p>
<h3><code>Transition.fillInWithKeyEvents(selector, text)</code></h3>
<p>This sends keyup/keydown events to the elements identified by selector, simulating a user typing.</p>
<h3><code>Transition.findVisibleText(text)</code>, <code>Transition.findVisibleText_(text)</code></h3>
<p>These search the entire dom of the main frame for any element that contains the provided text.</p>
<p><a name="logging-api"></a></p>
<h3><code>Transition.findVisibleText</code>, <code>Transition.findVisibleText_</code></h3>
<p><code>findVisibleText</code> performs a jQuery find for the last node that matchs the selector: <code>*contains(yourtext):visible:last</code></p>
<h2>Logging</h2>
<p>There are 6 logging levels, each indicating a different severity:</p>
<ul>
	<li><code>Transition.Log.trace</code></li>
	<li><code>Transition.Log.debug</code></li>
	<li><code>Transition.Log.info</code></li>
	<li><code>Transition.Log.warn</code></li>
	<li><code>Transition.Log.error</code></li>
	<li><code>Transition.Log.fatal</code></li>
</ul>
<p>The Log output window&#8217;s filter setting will determine what is visible based on the level.</p>
<p>The log functions use <a href="https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js"><code>sprintf</code></a> for formatting entries.  The first argument will be treated as the format string and additional arguments will supply values for the format string.</p>
<p>The format strings follow the <a href="https://github.com/kvz/phpjs/blob/master/functions/strings/sprintf.js">sprintf</a> library with a single addition: <code>%a</code> for formatting JavaScript objects:</p>
<div class="highlight"><pre><code class="javascript">  <span class="nx">Transition</span><span class="p">.</span><span class="nx">Log</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;Object is: %a&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">an</span><span class="o">:</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="nx">num</span><span class="o">:</span> <span class="mi">123</span><span class="p">});</span>
  <span class="c1">// =&gt; [23:20:30] Object is: {&quot;an&quot;:&quot;object&quot;,&quot;num&quot;:123}</span>
</code></pre>
</div>
<p><a name="declaring-tests"></a></p>
<h2>Test Declaration</h2>
<h3><code>Transition.addTest({name: 'test-name', states: [...]})</code></h3>
<h3>Adding States</h3>
<h4><code>Transition.to(name, [predicate])</code></h4>
<p>This adds a transition to the current state.  It can be passed a name and optionally a predicate.</p>
<h4><code>Transition.when(predicate)</code></h4>
<p><code>when</code> attaches a predicate to a transition.  The predicate may be any of the following:</p>
<h5>string: method</h5>
<p>If the string names a method on the test, this method will become the predicate used to determine if the transition is followed.</p>
<div class="highlight"><pre><code class="javascript">  <span class="p">...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">newState</span><span class="p">(</span><span class="s1">&#39;mainPage&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">navigateTo_</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">).</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;listsFormExists&#39;</span><span class="p">)</span>
  <span class="p">...</span>

  <span class="nx">listsFormExists</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Transition</span><span class="p">.</span><span class="nx">elementExists</span><span class="p">(</span><span class="s1">&#39;form[action=&quot;/lists&quot;]&#39;</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
</div>
<h5>string: jQuery selector</h5>
<p>If the string does not identify a method on the test, then it is treated as a jQuery selector.  The selector may be prefixed with an exclamation mark.  jQuery selectors are treated as if you had written: <code>Transition.elementExists_(selector)</code></p>
<p>If the selector starts an exclamation mark, it is treated as if <code>Transition.elementNotExists_(selector)</code> were written.</p>
<div class="highlight"><pre><code class="javascript">  <span class="p">...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">newState</span><span class="p">(</span><span class="s1">&#39;mainPage&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">navigateTo_</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">).</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;form[action=&quot;/lists&quot;]&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="s1">&#39;failure&#39;</span><span class="p">).</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;!form[action=&quot;/lists&quot;]&#39;</span><span class="p">)</span>
  <span class="p">...</span>
</code></pre>
</div>
<h5>function</h5>
<p>A function may be passed as the predicate.</p>
<div class="highlight"><pre><code class="javascript">  <span class="p">...</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">newState</span><span class="p">(</span><span class="s1">&#39;mainPage&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">navigateTo_</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">).</span><span class="nx">when</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Transition</span><span class="p">.</span><span class="nx">elementExists</span><span class="p">(</span><span class="s1">&#39;form[action=&quot;/lists&quot;]&#39;</span><span class="p">)</span>
      <span class="p">})</span>
  <span class="p">...</span>
</code></pre>
</div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Transition.js maintained by <a href="https://github.com/kyleburton">kyleburton</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

  </body>
</html>
